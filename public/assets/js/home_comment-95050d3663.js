$("document").ready(()=>{let e=!1;function t(t){$(t).click(o=>{console.log("toggle"),1==e?($($(t).data("target")).addClass("d-none"),e=!1):($($(t).data("target")).removeClass("d-none"),e=!0)})}for(let e of $(".trigger"))t($(e));let o=e=>{e.submit(t=>{t.preventDefault(),$.ajax({url:"/comment/create_comment",method:"POST",data:e.serialize(),success:function(e){let t=s(e.data.comment);$("#post-comment-"+e.data.comment.post).prepend(t),n($(" .delete_comment_button",t)),new ToggleLike($("#like-"+e.data.comment._id,t)),callNotysuccess("Commented Successfully !")},error:function(e){console.log(e.responseText),callNotyErr("Error In Commenting ! Please try after some time")}}),e[0].reset()})},s=e=>`<li class="media"  id="post-comment-${e._id}">\n       <a href="#" class="pull-left">\n           <img src="${e.user.avatar}" alt="" class="img-circle">\n       </a>\n       <div class="media-body mx-2">\n           <strong class="text-success"> ${e.user.name}</strong>\n           <br>\n           <sup class="text-muted pull-right ">\n               <small class="text-muted" id="time_comment">${moment(e.createdAt).fromNow().charAt(0).toUpperCase()+moment(e.createdAt).fromNow().slice(1)}</small>\n           </sup>\n           <p>\n            ${e.content}\n           </p>\n           <p>\n           <a href="/like/toggle/?id=${e._id}&type=Comment" id="like-${e._id}" class="like-buttons"\n           data-likes="0" data-toggle="false"><i class="far fa-heart"></i>\n           <span>0</span> </a> &nbsp;&nbsp;&nbsp;\n           </p>\n       </div>\n   \n               <a class="delete_comment_button" href="/comment/destroy/${e._id}">\n                   <h5 class="text-right"><i class="fas fa-trash"></i></h5>\n               </a>\n      \n   </li>`,n=e=>{$(e).click(t=>{t.preventDefault(),confirm("Are you sure ! You want to delete this ?")&&$.ajax({method:"get",url:$(e).prop("href"),success:e=>{$("#post-comment-"+e.data.comment_id).remove(),callNotysuccess("Deleted Successfully !")},error:function(e){callNotyErr("Error In deleting ! Please try after some time"),console.log(e.responseText)}})})};for(let e of $(".comment_form"))o($(e));!function(){for(let e of $(".delete_comment_button"))n(e)}(),callNotysuccess=e=>{new Noty({theme:"relax",text:e,type:"success",layout:"topRight",timeout:3e3}).show()},callNotyErr=e=>{new Noty({theme:"relax",text:e,type:"error",layout:"topRight",timeout:3e3}).show()},o()});