class chatEngine{constructor(e,s,t){this.chatBox=$("#"+e),this.userEmail=s,this.user_avatar=t,this.socket=io.connect("http://localhost:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("connection established using socket"),e.socket.emit("join_room",{user_email:e.userEmail,ChatRoomId:"Apix express"}),e.socket.on("user_joined",(function(e){console.log("A user has joined",e)}))})),$("#send-message").click((function(s){s.preventDefault();let t=$("#inputText").val();""!=t&&($("#inputText").val(""),e.socket.emit("send_message",{message:t,user_email:e.userEmail,user_avatar:e.user_avatar,ChatRoomId:"Apix express"}))})),e.socket.on("recieve_message",(function(s){console.log("Recieved some message!",s);let t=$(`\t  <div class="message message-left">\n            <div class="avatar-wrapper avatar-small">\n              <img class="chatimg"src="${s.user_avatar}" alt="avatar" />\n            </div>\n            <div class="bubble bubble-light">\n            ${s.message}\n            </div>\n          </div>`);s.user_email==e.userEmail&&(t=$(`<div class="message message-right">\n                <div class="avatar-wrapper avatar-small">\n                  <img class="chatimg" src=${s.user_avatar} alt="avatar" />\n                </div>\n                <div class="bubble bubble-dark">\n                ${s.message}\n                </div>\n              </div>`)),console.log(s.message,"brother"),$(".chat-room").append(t)})),$("#inputText").on("keydown",(function(s){e.socket.emit("typing",{typing:!0})})),$("#inputText").on("keyup",(function(s){setTimeout(()=>{e.socket.emit("typing",{typing:!1})},2e3)})),e.socket.on("display",e=>{1==e.typing?$("#feedback").text(" typing..."):$("#feedback").text("")})}}